import { PurchaseSalesTransactionSave } from "../models/PurchaseSalesTransactionSave";
import { BaseRepository } from "./BaseRepository";

export class PurchaseSalesTransactionSaveRepository extends BaseRepository {
    private tableName = 'purshase_sales_transaction_save';

    async create(transaction: PurchaseSalesTransactionSave): Promise<number> {
        const sql = `INSERT INTO ${this.tableName}  
        (
tin,
bhfId,
spplrTin,
invcNo,
orgInvcNo,
spplrBhfId,
spplrNm,
spplrInvcN,
spplrSdcId,
regTyCd,
pchsTyCd,
rcptTyCd,
pmtTyCd,
pchsSttsCd,
cfmDt,
pchsDt,
wrhsDt,
cnclReqDt,
cnclDt,
rfdDt,
totItemCnt,
taxblAmtA,
taxblAmtB,
taxblAmtC,
taxblAmtD,
taxRtA,
taxRtB,
taxRtC,
taxRtD,
taxAmtA,
taxAmtB,
taxAmtC,
taxAmtD,
totTaxblAmt,
totTaxAmt,
totAmt,
remark,
regrNm,
regrId,
modrNm,
modrId,
itemSeq,
itemCd,
itemClsCd,
itemNm,
bcd,
spplrItemClsCd,
spplrItemCd,
spplrItemNm,
pkgUnitCd,
pkg,
qtyUnitCd,
qty,
prc,
splyAmt,
dcRt,
dcAmt,
taxblAmt,
taxTyCd,
taxAmt,
itemExprDt
) VALUES (
:tin,
:bhfId,
:spplrTin,
:invcNo,
:orgInvcNo,
:spplrBhfId,
:spplrNm,
:spplrInvcN,
:spplrSdcId,
:regTyCd,
:pchsTyCd,
:rcptTyCd,
:pmtTyCd,
:pchsSttsCd,
:cfmDt,
:pchsDt,
:wrhsDt,
:cnclReqDt,
:cnclDt,
:rfdDt,
:totItemCnt,
:taxblAmtA,
:taxblAmtB,
:taxblAmtC,
:taxblAmtD,
:taxRtA,
:taxRtB,
:taxRtC,
:taxRtD,
:taxAmtA,
:taxAmtB,
:taxAmtC,
:taxAmtD,
:totTaxblAmt,
:totTaxAmt,
:totAmt,
:remark,
:regrNm,
:regrId,
:modrNm,
:modrId,
:itemSeq,
:itemCd,
:itemClsCd,
:itemNm,
:bcd,
:spplrItemClsCd,
:spplrItemCd,
:spplrItemNm,
:pkgUnitCd,
:pkg,
:qtyUnitCd,
:qty,
:prc,
:splyAmt,
:dcRt,
:dcAmt,
:taxblAmt,
:taxTyCd,
:taxAmt,
:itemExprDt
 )`;

        const result = await this.queryNamed<{ id: number }>(sql, transaction);
        return result.id;
    }

    // get all 

    async findAll(): Promise<PurchaseSalesTransactionSave[]> {
        const query = `SELECT * FROM ${this.tableName}`;
        return await this.query<PurchaseSalesTransactionSave[]>(query);
    }
}